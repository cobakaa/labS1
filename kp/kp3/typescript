Script started on 2020-12-22 13:28:57+03:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="148" LINES="36"]
]0;cobaka@DESKTOP-NVODA8O: /mnt/c/Users/nat70[01;32mcobaka@DESKTOP-NVODA8O[00m:[01;34m/mnt/c/Users/nat70[00m$ cat kp3.c[K[K[K[K[K[K[K[K[Kcd labS1/kp/kp3/
]0;cobaka@DESKTOP-NVODA8O: /mnt/c/Users/nat70/labS1/kp/kp3[01;32mcobaka@DESKTOP-NVODA8O[00m:[01;34m/mnt/c/Users/nat70/labS1/kp/kp3[00m$ cat la[K[Kkp3.c 
#include <stdio.h>
#include <math.h>

void print_table_top(void)
{
    char c1[] = "X";
	char c2[] = "Teylor sum";
	char c3[] = "Value of function";

    printf("‚îè");
	for (int i = 0; i < 10; i++) printf("‚îÅ");
	printf("‚îØ");
	for (int i = 0; i < 30; i++) printf("‚îÅ");
	printf("‚îØ");
	for (int i = 0; i < 30; i++) printf("‚îÅ");
	printf("‚îØ");
	for (int i = 0; i < 5; i++) printf("‚îÅ");
	printf("‚îì\n");
	printf("‚îÉ");
	printf("%-*s", 10, c1);
	printf("‚îÇ");
	printf("%-*s", 30, c2);
	printf("‚îÇ");
	printf("%-*s", 30, c3);
	printf("‚îÇ");
	printf("Iter.");
	printf("‚îÉ\n");
}

void print_table_str(float x, float res_function, float res_teylor, int n)
{
    printf("‚î†");
	for (int i = 0; i < 10; i++) printf("‚îÄ");
	printf("‚îº");
	for (int i = 0; i < 30; i++) printf("‚îÄ");
	printf("‚îº");
	for (int i = 0; i < 30; i++) printf("‚îÄ");
	printf("‚îº");
	for (int i = 0; i < 5; i++) printf("‚îÄ");
	printf("‚î®\n");
	printf("‚îÉ");
	printf("%-*g", 10, x);
	printf("‚îÇ");
	
    if (x < 0) {
	    printf("%0.9f%-*s", res_teylor, 18, " ");
	    printf("‚îÇ");
	    printf("%0.9f%-*s", res_function, 18, " ");
	    printf("‚îÇ");
	    printf("%-*d", 5, n);
	    printf("‚îÉ\n");
	} else {
	    printf("%0.9f%-*s", res_teylor, 19, " ");
	    printf("‚îÇ");
	    printf("%0.9f%-*s", res_function, 19, " ");
	    printf("‚îÇ");
	    printf("%-*d", 5, n);
	    printf("‚îÉ\n");
	}
}

void print_table_bot(void)
{
    printf("‚îó");
	for (int i = 0; i < 10; i++) printf("‚îÅ");
	printf("‚î∑");
	for (int i = 0; i < 30; i++) printf("‚îÅ");
	printf("‚î∑");
	for (int i = 0; i < 30; i++) printf("‚îÅ");
	printf("‚î∑");
	for (int i = 0; i < 5; i++) printf("‚îÅ");
	printf("‚îõ\n");
}

float f(float x)
{
	return logf(1 + x - 2 * x * x);
}

float m_round(float x, int n)
{
	n = pow(10, n);
	float res = roundf(x * n) / n; 
	return (res == -0.0f) ? 0.0 : res;
}

int nums(int x)
{
	int res = 0;
	while(x != 0) {
		x /= 10;
		res++;
	}
	return res;
}

float epsilon(void)
{
	float eps = 1.0f;
	while (eps / 2.0f + 1.0f > 1.0f) {
		eps /= 2.0f;
	}
	return eps;
}

int main(void)
{
	float eps = epsilon();

	int steps;
	float k;
	const float a = -0.2, b = 0.3;

	printf("Machine epsilon for type float in system = %0.9f\n", eps);
	printf("Enter number of steps and parameter k: ");
	scanf("%d %f", &steps, &k);
	printf("k = %g", k);
	printf("\n");
	printf("Table of values ‚Äã‚Äãfor the Taylor series and standard function f(x) = ln(1 + x - 2x¬≤)\n");

	float delta = (b - a) / steps;
	int n = 0;

	print_table_top();

	float x = a;
	for (int i = 0; i <= steps; ++i) {

		float res_teylor = 0, res_function = f(x);
	    float summand = 0;
	    
        do {
            float bin_degree = 2, xnew = x;
            ++n;

            for (int j = 1; j < n; ++j) {
                xnew *= x;
				bin_degree *= 2;
            }

            if ((n + 1) % 2 != 0) bin_degree = -bin_degree;
			summand = ((bin_degree - 1) / n) * xnew;
            res_teylor += summand;

	    } while ((fabsf(res_function - res_teylor) > eps * k) && (n < 100));
	  
        print_table_str(x, res_function, res_teylor, n);

	    x = m_round(a + delta * (i + 1), nums(steps) + 1);
	    n = 0;
	    res_teylor = 0;
	}
	
    print_table_bot();

	return 0;
}
]0;cobaka@DESKTOP-NVODA8O: /mnt/c/Users/nat70/labS1/kp/kp3[01;32mcobaka@DESKTOP-NVODA8O[00m:[01;34m/mnt/c/Users/nat70/labS1/kp/kp3[00m$ asd[K[K[Kcat kp3.c d labS1/kp/kp3/[8P./a.out gcc kp4.c -lm[1Pcat out.txt ./a.out > out.txt[4Pgcc kp4.c -lm[1Pcat out.txt ./a.out > out.txt[Kgcc kp4.c -lm[5P./a.out gcc kp4.c -lm[5P./a.out gcc kp4.c -lm[5P./a.out gcc kp4.c -lm[5P./a.out gcc kp4.c -lm[5P./a.out gcc kp4.c -lm[5P./a.out > out.txt[5Pcat out.txt gcc kp4.c -lm./a.out > out.txt[5Pcat out.txt gcc kp4.c -lmexit[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[Kexit
exit

Script done on 2020-12-22 14:15:31+03:00 [COMMAND_EXIT_CODE="0"]
